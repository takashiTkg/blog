<!doctype html><html lang=ja><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Hugoとtailwindcssをアップデートした</title>
<meta name=description content="takashi blog"><meta name=author content="takashi"><link rel=icon sizes=16x16 href=https://takashitkg.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://takashitkg.github.io/blog/apple-touch-icon.png><meta property="og:type" content="blog"><meta property="og:title" content="Hugoとtailwindcssをアップデートした"><meta property="og:site_name" content="takashi Blog"><meta property="og:url" content="https://takashitkg.github.io/blog/posts/hugo-update/"><meta property="og:image" content="https://res.cloudinary.com/dhsgdhfhj/image/upload/l_text:Sawarabi%20Gothic_50_bold:Hugoとtailwindcssをアップデートした,co_rgb:333,w_500,c_fit/v1608554990/ogp/white-background_hcfukg.png"><link href="https://takashitkg.github.io/blog/css/main.min.c8942c19a542b0e57e4204318aa6293b98921c79891db7d57d09fe32be50d8cc.css" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-8MXV1Y9Q34"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8MXV1Y9Q34")</script></head><body class="flex flex-col min-h-screen bg-gray-100"><header id=header class="fixed z-10 top-0 bg-gray-100 shdow w-full"><div id=progress class="h-1 z-20 top-0" style="background:linear-gradient(to right,#6b6d6a var(--scroll),transparent 0)"></div><div id=navcontent class="container mx-auto md:px-52 py-3 px-8"><a href=https://takashitkg.github.io/blog/ class="font-bold font-mono text-3xl">takashi Blog</a><nav><ul class="flex justify-start"><li class="px-auto mr-4"><a class="font-thin text-lg border-transparent border-b-2 hover:border-gray-500" href=https://takashitkg.github.io/blog/>top</a></li><li class="px-auto mr-4"><a class="font-thin text-lg border-transparent border-b-2 hover:border-gray-500" href=https://takashitkg.github.io/blog/about/>about</a></li></ul></nav></div></header><main class="container mx-auto md:px-52 px-8 pt-28"><article class=w-full><h1 class="text-3xl mb-1">Hugoとtailwindcssをアップデートした</h1><time class=text-gray-600 datetime=2023-12-08T20:47:24>2023.12.08 20:47</time><div class="mt-4 prose prose-headings:mt-1 prose-headings:mb-2 max-w-none"><p>こんにちは、たかしです。<br>このブログは割と昔に作ったので Hugo と tailwind のバージョンが低いままでした。</p><ul><li>Hugo v0.89</li><li>tailwindcss 2.2.19</li></ul><p>昔のバージョンでもちゃんと動いてくれていたのですが、Github actions で「Node のバージョンが古いぞ！」と警告が出ていました。<br>また、Markdown から生成した HTML にスタイルを当てるために<code>tailwindcss/typography</code>を使用しているのですが、昔のバージョンだと細かいスタイルの調整ができない問題がありました。<br>（具体的には見出し間の margin を小さくしたいのにできませんでした）<br>tailwindcss の purge 指定も昔のバージョンだとうまく動かなかったので、<code>hugo-stats.json</code>という使用しているクラスが出力されたファイルを使用して postcss で purge していました。<br>現行のバージョンだとそれも必要なくなるため、アップデートするとたくさん良いことがありそうだと判断しました。
備忘録代わりに作業を記録しておきます。</p><h2 id=hugo-のアップデート>Hugo のアップデート</h2><p>僕は linuxbrew でパッケージ管理をしているので、そちらでアップデートします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew update
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew upgrade hugo
</span></span></code></pre></div><p>簡単ですね。</p><h2 id=tailwindcss-のアップデート>tailwindcss のアップデート</h2><p>僕の場合は tailwindcss 関連のもの以外は特にインストールしていなかったので、<code>npm-check-updates</code>でまとめてやってしまいます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># アップデート可能なパッケージの確認</span>
</span></span><span style=display:flex><span>npx -p npm-check-updates  -c <span style=color:#e6db74>&#34;ncu&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># package.jsonの更新</span>
</span></span><span style=display:flex><span>npx -p npm-check-updates  -c <span style=color:#e6db74>&#34;ncu -u&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># packageのインストール</span>
</span></span><span style=display:flex><span>npm install
</span></span></code></pre></div><h2 id=終わりに>終わりに</h2><p>あとは<code>config.toml</code>を編集して stats.json を出力しないようにしたり、tailwindcss の設定ファイルを更新したりしました。<br>github actions もバージョンの記載を上げて、動作確認して完了です。<br>思ってたよりもサクッと終わってよかったです。</p><p>今後は Hugo の標準機能を使った OGP の自動生成や、devcontainer で環境を作ったりしたいです。<br>読んで下さってありがとうございました。
それでは、また。</p></div></article><div class="border-t flex-grow border-gray-400 mt-6"></div><div class="flex-col md:flex md:flex-row md:justify-between my-8"><a class="font-semibold text-xl hover:text-blue-800 flex items-center" href=https://takashitkg.github.io/blog/posts/20231207/><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0 4-4m-4 4h18"/></svg>20231207 日記
</a><a class="font-semibold text-xl hover:text-blue-800 block text-right w-full md:w-auto" href=https://takashitkg.github.io/blog/posts/20231209/>20231209 日記<svg class="inline-block h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0-4 4m4-4H3"/></svg></a></div></main><footer class="container mx-auto md:px-52 px-8 mt-auto"><p class="py-2 text-gray-600">&copy; 2023 <a href=https://takashitkg.github.io/blog/>takashi Blog</a></p></footer><script src=https://takashitkg.github.io/blog/js/single-header.js></script><script src=https://takashitkg.github.io/blog/js/code-title.js></script></body></html>