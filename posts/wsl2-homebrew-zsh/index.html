<!doctype html><html lang=ja>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>WSL2にHomebrewとzshとpreztoを設定する</title>
<meta name=description content="takashi blog">
<meta name=author content="takashi">
<link rel=icon sizes=16x16 href=https://takashitkg.github.io/blog/favicon.ico>
<link rel=apple-touch-icon href=https://takashitkg.github.io/blog/apple-touch-icon.png>
<meta property="og:type" content="blog">
<meta property="og:title" content="WSL2にHomebrewとzshとpreztoを設定する">
<meta property="og:site_name" content="takashi Blog">
<meta property="og:url" content="https://takashitkg.github.io/blog/posts/wsl2-homebrew-zsh/">
<meta property="og:image" content="https://res.cloudinary.com/dhsgdhfhj/image/upload/l_text:Sawarabi%20Gothic_50_bold:WSL2にHomebrewとzshとpreztoを設定する,co_rgb:333,w_500,c_fit/v1608554990/ogp/white-background_hcfukg.png">
<link href="https://takashitkg.github.io/blog/css/main.min.5e615d6a4c5a4fc7332ec50e55b254eeb390475ffe6322e417a64e32c7ce8efd.css" rel=stylesheet>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8MXV1Y9Q34"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-8MXV1Y9Q34')</script>
</head>
<body class="flex flex-col min-h-screen bg-gray-100">
<header id=header class="fixed z-10 top-0 bg-gray-100 shdow w-full">
<div id=progress class="h-1 z-20 top-0" style="background:linear-gradient(to right,#6b6d6a var(--scroll),transparent 0)"></div>
<div id=navcontent class="container mx-auto md:px-52 py-3 px-8">
<a href=https://takashitkg.github.io/blog/ class="font-bold font-mono text-3xl">
takashi Blog
</a>
<nav>
<ul class="flex justify-start">
<li class="px-auto mr-4">
<a class="font-thin text-lg border-transparent border-b-2 hover:border-gray-500" href=https://takashitkg.github.io/blog/>top</a>
</li>
<li class="px-auto mr-4">
<a class="font-thin text-lg border-transparent border-b-2 hover:border-gray-500" href=https://takashitkg.github.io/blog/about/>about</a>
</li>
</ul>
</nav>
</div>
</header>
<main class="container mx-auto md:px-52 px-8 pt-28">
<article class=w-full>
<h1 class="text-3xl mb-1">WSL2にHomebrewとzshとpreztoを設定する</h1>
<time class=text-gray-600 datetime=2021-10-13T05:35:07>2021.10.13 05:35</time>
<div class="mt-4 prose max-w-none">
<p>こんにちは、たかしです。<br>
今回はWSL環境をセットアップする機会があったので、タイトルの環境を作ったメモを書きます。</p>
<h1 id=wsl2のインストール>WSL2のインストール</h1>
<p><a href=https://docs.microsoft.com/ja-jp/windows/wsl/install target=_blank>WSL のインストール</a><br>
を参考にインストールします。<br>
2021年10月現在ではPowerShellを管理士権限で起動して</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wsl --install
</code></pre></div><p>をするだけでいけました。<br>
デフォルトでWSL2になります。<br>
マシンを再起動したら、お好きなディストリビューションをインストールしましょう。<br>
MicrosoftStoreからインストールできます。<br>
今回はUbuntu20.04をインストールしました。</p>
<h1 id=brewのインストール>brewのインストール</h1>
<p>Ubuntuを起動したらとりあえずいつものやつをします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt update
sudo apt upgrade
</code></pre></div><p>必要なパッケージをインストールします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install build-essential curl file git
</code></pre></div><p>次に<a href=https://brew.sh/ target=_blank>Homebrewの公式ページ</a>に従ってワンライナーでHomebrewをインストールします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>/bin/bash -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</code></pre></div><p>インストールできたら以下のスクリプトを実行してPATHを通します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>test -d ~/.linuxbrew <span style=color:#f92672>&amp;&amp;</span> eval <span style=color:#66d9ef>$(</span>~/.linuxbrew/bin/brew shellenv<span style=color:#66d9ef>)</span>
test -d /home/linuxbrew/.linuxbrew <span style=color:#f92672>&amp;&amp;</span> eval <span style=color:#66d9ef>$(</span>/home/linuxbrew/.linuxbrew/bin/brew shellenv<span style=color:#66d9ef>)</span>
test -r ~/.bash_profile <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;eval \$(</span><span style=color:#66d9ef>$(</span>brew --prefix<span style=color:#66d9ef>)</span><span style=color:#e6db74>/bin/brew shellenv)&#34;</span> &gt;&gt;~/.bash_profile
echo <span style=color:#e6db74>&#34;eval \$(</span><span style=color:#66d9ef>$(</span>brew --prefix<span style=color:#66d9ef>)</span><span style=color:#e6db74>/bin/brew shellenv)&#34;</span> &gt;&gt;~/.profile
</code></pre></div><p><code>brew doctor</code>を実行して問題ないか確認しましょう。</p>
<h1 id=zshとpreztoのインストール>zshとpreztoのインストール</h1>
<h2 id=zshのインストール>zshのインストール</h2>
<p>brewを使ってzshをインストールします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install zsh
</code></pre></div><p>インストールできたらzshをデフォルトシェルに変更します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>which zsh | sudo tee -a /etc/shells
chsh -s /home/linuxbrew/.linuxbrew/bin/zsh
</code></pre></div><p>ターミナルを起動しなおすと何やら聞かれるので、<code>q</code>を押してスキップします。</p>
<h2 id=preztoのインストール>preztoのインストール</h2>
<p>zshをいい感じにしてくれるやつです。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone --recursive https://github.com/sorin-ionescu/prezto.git <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>ZDOTDIR<span style=color:#66d9ef>:-</span>$HOME<span style=color:#e6db74>}</span><span style=color:#e6db74>/.zprezto&#34;</span>
</code></pre></div><p>で持ってきます。
終わったら次のコマンドを入力して各種設定ファイルを生成します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>setopt EXTENDED_GLOB
<span style=color:#66d9ef>for</span> rcfile in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>ZDOTDIR<span style=color:#66d9ef>:-</span>$HOME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>/.zprezto/runcoms/^README.md<span style=color:#f92672>(</span>.N<span style=color:#f92672>)</span>; <span style=color:#66d9ef>do</span>
  ln -s <span style=color:#e6db74>&#34;</span>$rcfile<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>ZDOTDIR<span style=color:#66d9ef>:-</span>$HOME<span style=color:#e6db74>}</span><span style=color:#e6db74>/.</span><span style=color:#e6db74>${</span>rcfile:t<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
<span style=color:#66d9ef>done</span>
</code></pre></div><p>zshを起動しなおして、brewのパスをzshにも通します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#39;export PATH=&#34;/home/linuxbrew/.linuxbrew/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.zshrc
</code></pre></div><h1 id=まとめ>まとめ</h1>
<p>手順としては以上です。<br>
この後は使う言語の環境を作ったりお好きにどうぞ。<br>
僕はWindowsTerminalを使っています。<br>
見た目もいい感じにいじれるし、複数タブ開けるのがいいですね。</p>
<p>以前よりも簡単に環境構築できるようになっていて良かったです。<br>
それでは。</p>
</div>
</article>
<div class=mt-2>
<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-show-count=false data-lang=en>Tweet</a>
<script async src=https://platform.twitter.com/widgets.js></script>
</div>
<div class="border-t flex-grow border-gray-400 mt-6"></div>
<div class="flex-col md:flex md:flex-row md:justify-between my-8">
<a class="font-semibold text-xl hover:text-blue-800 flex items-center" href=https://takashitkg.github.io/blog/posts/20210911/><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0 4-4m-4 4h18"/></svg>
日記
</a>
<a class="font-semibold text-xl hover:text-blue-800 block text-right w-full md:w-auto" href=https://takashitkg.github.io/blog/posts/hugo-blog/>
ブログをHugoに移行しました<svg class="inline-block h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0-4 4m4-4H3"/></svg>
</a>
</div>
</main>
<footer class="container mx-auto md:px-52 px-8 mt-auto">
<p class="py-2 text-gray-600">&copy; 2023 <a href=https://takashitkg.github.io/blog/>takashi Blog</a></p>
</footer>
<script src=https://takashitkg.github.io/blog/js/single-header.js></script>
<script src=https://takashitkg.github.io/blog/js/code-title.js></script>
</body>
</html>